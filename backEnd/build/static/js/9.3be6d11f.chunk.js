(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{491:function(e,t,n){"use strict";n.r(t);n(133);var a=n(136),r=(n(115),n(122)),i=(n(128),n(135)),l=(n(146),n(134)),c=n(21),u=n(0),o=n.n(u),d=n(25),m=n(121),s=n(265),v=n(9),f=n(125),g=n(37),b=n(14),h=n.n(b),x=n(23),p=n.n(x),E=l.a.Option,O=i.a.confirm;t.default=Object(d.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,driversText:e.initLang.textOwner.driversForm,textMenu:e.initLang.textOwner.userMenu,demo:e.authReducer.demo}})(function(e){var t=Object(u.useState)({name:{elementType:"input",elementConfig:{type:"text",placeholder:e.driversText.name},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text",placeholder:e.driversText.lastName},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},_id:{elementType:"input",elementConfig:{type:"text",disabled:!0},value:"",validation:{required:!0,minLength:6,maxLength:20},valid:!1,touched:!1}}),n=Object(c.a)(t,2),i=n[0],d=n[1],b=Object(u.useContext)(m.a),x=b.showEditDriver,T=b.setShowEditDriver,j=Object(u.useState)([]),y=Object(c.a)(j,2),w=y[0],C=y[1],D=Object(u.useState)(!1),L=Object(c.a)(D,2),S=L[0],k=L[1],N=Object(u.useState)(null),_=Object(c.a)(N,2),M=_[0],q=_[1],A=Object(u.useState)(null),F=Object(c.a)(A,2),J=F[0],R=F[1],V=Object(u.useState)(!1),H=Object(c.a)(V,2),I=H[0],P=H[1],z=o.a.createElement(E,null),B=[],G=[];for(var K in i)B.push({id:K,config:i[K]}),G.push(K);var Q=function(){k(!0),h.a.get("/system/allDrivers").then(function(e){C(e.data),k(!1)}).catch(function(e){k(!1),R(e)})};Object(u.useEffect)(function(){Q()},[]),Object(u.useEffect)(function(){x&&Q()},[x]),Object(u.useEffect)(function(){Object(v.i)(i,P)},[i]),Object(u.useEffect)(function(){Object(v.b)(i,G,e.driversText,d)},[e.driversText]);var U=function(t){t&&t.preventDefault(),e.demo?e.demoModal(!0):new s.a({id:i._id.value.toLowerCase().trim(),newData:{"Driver.name":i.name.value.trim(),"Driver.lastName":i.lastName.value.trim()}}).updateDriver(q,R,k,Q)},W=function(e){e&&e.preventDefault(),Object(v.a)(i,G,d),T(!1),q(null),R(null),k(!0),X()},X=function(){setTimeout(function(){k(!1)},10)},Y=B.map(function(e){return o.a.createElement(f.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(v.f)(t,i,e.id,d)}})});w.length&&(z=w.map(function(e){return o.a.createElement(E,{value:e._id,key:e._id},e.lastName+" "+e.name)}));var Z=o.a.createElement(o.a.Fragment,null,o.a.createElement("h6",null,e.driversText.editPanelName),o.a.createElement("p",null,e.driversText.choiceDriver),o.a.createElement(l.a,{style:{width:280},onChange:function(e){return function(e){var t=w.find(function(t){return t._id===e}),n=p.a.cloneDeep(i);G.forEach(function(e){n[e].value=t[e],n[e].valid=!0,n[e].touched=!0}),d(n)}(e)},defaultValue:e.textMenu.drivers},z),o.a.createElement("form",{onSubmit:U,style:{display:"inline",textAlign:"center"}},Y,o.a.createElement(r.a,{disabled:!I||S,onClick:U},e.driversText?e.driversText.submitChange:null),o.a.createElement(r.a,{disabled:!I||S,type:"danger",style:{margin:"1rem"},onClick:function(t){if(t&&t.preventDefault(),e.demo)e.demoModal(!0);else{var n=new s.a({id:i._id.value.toLowerCase().trim()});O({title:i.name.value+" "+i.lastName.value,content:e.driversText.deleteConfirm,onOk:function(){n.deleteDriver(q,R,k,Q)},onCancel:function(){}})}}},e.driversText?e.driversText.delete:null)));return o.a.createElement(a.a,{visible:x,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:W},w.length?M?o.a.createElement("div",{style:{margin:20,textAlign:"center"}},o.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.driversText.editDriverSuccess),o.a.createElement("h6",null,i.name.value+" "+i.lastName.value),o.a.createElement("p",null,"Id: ",M)):J?o.a.createElement("div",{style:{margin:"1.5rem"}},o.a.createElement("h6",{style:{color:"red"}},e.errorText[J]?e.errorText[J]:e.driversText.addDriverError)):S?o.a.createElement(g.a,null):Z:o.a.createElement("h6",{style:{margin:20,color:"rgba(43, 144, 143, 0.85)"}},e.driversText.noDrivers),o.a.createElement(r.a,{onClick:W},e.driversText?e.driversText.cancel:null))})}}]);
//# sourceMappingURL=9.3be6d11f.chunk.js.map