(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{119:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext({showAddDriver:!1,setShowAddDriver:function(){},showEditDriver:!1,setShowEditDriver:function(){},showAddTruck:!1,setShowAddTruck:function(){},showEditTruck:!1,showTheft:!1,setShowTheft:function(){},setShowEditTruck:function(){},showEditCompny:!1,setShowEditCompany:function(){},showPayments:!1,setShowPayments:function(){},showOrders:!1,setShowOrders:function(){},showInvoices:!1,setShowInvoices:function(){},showPhoneInstruction:!1,setShowPhoneInstruction:function(){},showManualRoutes:!1,setShowManualRoutes:function(){}});t.a=r},219:function(e,t,a){e.exports={Fuel:"Drivers__Fuel__qZWNH",FuelChart:"Drivers__FuelChart__2YQVQ"}},221:function(e,t,a){e.exports={Fuel:"Trucks__Fuel__3g5Yq",FuelChart:"Trucks__FuelChart__21O_j"}},268:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(122),r=a(123),l=a(14),i=a.n(l),c=function(){function e(t){var a=t.id,r=t.Driver,l=t.newData;Object(n.a)(this,e),this.driverData={id:a,Driver:r,newData:l}}return Object(r.a)(e,[{key:"addDriver",value:function(e,t,a,n){n(!0),i.a.post("/system/addDriver",this.driverData).then(function(a){e(a.data),t(!0),n(!1)}).catch(function(e){a(e.response.data.toString()),n(!1)})}},{key:"updateDriver",value:function(e,t,a,n){a(!0),i.a.put("/system/update",this.driverData).then(function(t){e(t.data),a(!1),n()}).catch(function(e){t(e.response.data.toString()),a(!1)})}},{key:"deleteDriver",value:function(e,t,a,n){a(!0),i.a.delete("/system/update",{data:this.driverData}).then(function(t){e(t.data),a(!1),n()}).catch(function(e){t(e.response.data.toString()),a(!1)})}}]),e}()},346:function(e,t,a){e.exports={Menu:"Menu__Menu__1fp1Z"}},500:function(e,t,a){e.exports=a.p+"static/media/instructionPhone.182d3c7a.jpg"},501:function(e,t,a){e.exports={Container:"OwnerLayout__Container__360Bb"}},504:function(e,t,a){"use strict";a.r(t);a(135);var n=a(140),r=a(20),l=a(0),i=a.n(l),c=a(25),o=a(6),u=a(119),s=a(176),m=a(346),d=a.n(m),h=(a(169),a(111)),f=(a(117),a(120)),p=(a(502),a(271)),b=p.b.SubMenu,g=Object(c.b)(function(e){return{textMenu:e.initLang.textOwner.userMenu}})(function(e){var t=Object(l.useState)(!1),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.setShowAddDriver,m=o.setShowEditDriver,d=o.setShowAddTruck,g=o.setShowEditTruck,x=o.setShowTheft,v=o.setShowAddWorker,y=o.setShowEditWorker,E=o.setShowEditCompany,O=o.setShowPayments,T=o.setShowPhoneInstruction,j=o.setShowManualRoutes;return i.a.createElement("div",{className:"container"},i.a.createElement(f.a,{type:"primary",onClick:function(){return c(!n)},style:{marginBottom:20}},i.a.createElement(h.a,{type:n?"menu-unfold":"menu-fold"})),i.a.createElement(p.b,{defaultSelectedKeys:["1"],mode:"vertical",theme:"dark",inlineCollapsed:n},i.a.createElement(p.b.Item,{key:"1",style:{cursor:"none"}},i.a.createElement(h.a,{type:"menu"}),i.a.createElement("span",null,e.textMenu.menuName)),i.a.createElement(b,{key:"drivers",title:i.a.createElement("span",null,i.a.createElement(h.a,{type:"user-add"}),i.a.createElement("span",null,e.textMenu.drivers))},i.a.createElement(p.b.Item,{onClick:function(){return s(!0)},key:"2"},e.textMenu.addDriver),i.a.createElement(p.b.Item,{onClick:function(){return m(!0)},key:"3"},e.textMenu.editDriver)),i.a.createElement(b,{key:"trucks",title:i.a.createElement("span",null,i.a.createElement(h.a,{type:"dashboard"}),i.a.createElement("span",null,e.textMenu.trucks))},i.a.createElement(p.b.Item,{onClick:function(){return d(!0)},key:"4"},e.textMenu.addTruck),i.a.createElement(p.b.Item,{onClick:function(){return g(!0)},key:"5"},e.textMenu.editTruck),i.a.createElement(p.b.Item,{onClick:function(){return x(!0)},key:"6"},e.textMenu.theft)),i.a.createElement(b,{key:"workers",title:i.a.createElement("span",null,i.a.createElement(h.a,{type:"usergroup-add"}),i.a.createElement("span",null,e.textMenu.workers))},i.a.createElement(p.b.Item,{onClick:function(){return v(!0)},key:"7"},e.textMenu.addWorker),i.a.createElement(p.b.Item,{onClick:function(){return y(!0)},key:"8"},e.textMenu.editWorker)),i.a.createElement(b,{key:"company",title:i.a.createElement("span",null,i.a.createElement(h.a,{type:"tool"}),i.a.createElement("span",null,e.textMenu.company))},i.a.createElement(p.b.Item,{onClick:function(){return E(!0)},key:"9"},e.textMenu.editCompany),i.a.createElement(p.b.Item,{onClick:function(){return O(!0)},key:"10"},e.textMenu.payments),i.a.createElement(p.b.Item,{onClick:function(){},key:"11"},e.textMenu.orders),i.a.createElement(p.b.Item,{onClick:function(){},key:"12"},e.textMenu.invoices)),i.a.createElement(b,{key:"instructions",title:i.a.createElement("span",null,i.a.createElement(h.a,{type:"info-circle"}),i.a.createElement("span",null,e.textMenu.instructions))},i.a.createElement(p.b.Item,{onClick:function(){},key:"13"},i.a.createElement("a",{href:e.textMenu.systemInstructionLink,target:"_blanc"},e.textMenu.systemInstruction)),i.a.createElement(p.b.Item,{onClick:function(){return T(!0)},key:"14"},e.textMenu.driverInstruction)),i.a.createElement(b,{key:"routes",title:i.a.createElement("span",null,i.a.createElement(h.a,{type:"car"}),i.a.createElement("span",null,e.textMenu.routes))},i.a.createElement(p.b.Item,{onClick:function(){return j(!0)},key:"15"},e.textMenu.manualRoutes))))}),x=function(){return i.a.createElement("div",{className:d.a.Menu},i.a.createElement(g,null))},v=(a(362),a(491)),y=(a(158),a(162)),E=(a(151),a(150)),O=a(28),T=a(122),j=a(123),k=a(141),w=a(136),C=a(142),S=a(219),L=a.n(S),D=a(171),N=a.n(D),_=a(172),M=a.n(_),F=a(114),I=a.n(F),R=(a(147),a(148)),A=a(21),P=a(377),q=a.n(P),W=function(e){function t(){return Object(T.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"mixed-chart",style:{width:"98%"}},i.a.createElement(q.a,{options:this.props.options,series:this.props.series,type:this.props.type,height:this.props.height}))))}}]),t}(l.Component),V=a(14),H=a.n(V),Y=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.driverCharts}})(function(e){var t=Object(l.useState)(!0),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!0),u=Object(r.a)(o,2),s=u[0],m=u[1],d=Object(l.useState)({options:{chart:{id:"Driver-Fuel-Chart"},plotOptions:{bar:{horizontal:!0}},yaxis:{labels:{maxWidth:360}},dataLabels:{enabled:!0,offsetX:300,style:{fontSize:"12px",colors:["#fff"]}},xaxis:{min:20,labels:{trim:!1,axisTicks:{show:!0,borderType:"solid",color:"#78909C",height:6,offsetX:0,offsetY:0}},categories:[]},theme:{mode:"light",palette:"palette5"}},series:[{name:e.chartText.chartTooltipFuel,data:[]}]}),h=Object(r.a)(d,2),f=h[0],p=h[1];Object(l.useEffect)(function(){b(e.dateFrom,e.dateEnd)},[e.dateFrom,e.dateEnd]);var b=function(e,t){var a=encodeURI("from=".concat(e,"&end=").concat(t,"&param=mediaReal"));m(!0),H.a.get("/system/driversFuelEfficiency?".concat(a)).then(function(e){if(!e.data.length)return m(!1),void c(!0);var t=e.data.map(function(e){return e.driverName}),a=e.data.map(function(e){return e.realAvg.toFixed(2)}),n=[Object(A.a)({},f.series[0],{data:a})],r=Object(A.a)({},f.options,{xaxis:Object(A.a)({},f.options.xaxis,{categories:t})});p({options:r,series:n}),m(!1),c(!1)}).catch(function(){m(!1),c(!0)})};return s?i.a.createElement(R.a,{tip:"Loading..."}):n?i.a.createElement("h4",{style:{color:"#007bff"}},e.chartText.noData):i.a.createElement(W,{options:f.options,series:f.series,type:"bar",height:25*f.options.xaxis.categories.length+100})}),z=E.a.RangePicker,U=y.a.Panel,K=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(k.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dateFrom:I()().startOf("month").subtract(1,"month"),dateEnd:I()()},a.onDateChange=function(e,t){a.setState(function(e){return{dateFrom:new Date(t[0]).getTime(),dateEnd:new Date(t[1]).getTime()}})},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e;return i.a.createElement("div",{className:L.a.Fuel},i.a.createElement(y.a,{defaultActiveKey:["1"],expandIconPosition:"right"},i.a.createElement(U,{header:this.props.chartText.titleFuel,key:"1",extra:i.a.createElement(h.a,{type:"setting",onClick:function(e){e.stopPropagation(),console.log("extra")}})},i.a.createElement("span",{style:{marginRight:10}},this.props.chartText.dateChoice),i.a.createElement(z,{locale:"es"===this.props.language?N.a:M.a,allowClear:!1,defaultValue:[I()().startOf("month").subtract(1,"month"),I()()],ranges:(e={},Object(O.a)(e,this.props.chartText.thisMonth,[I()().startOf("month"),I()().endOf("month")]),Object(O.a)(e,this.props.chartText.lastMonth,[I()().startOf("month").subtract(1,"month"),I()().startOf("month").subtract(1,"day")]),e),onChange:this.onDateChange}),i.a.createElement("div",{className:L.a.FuelChart},i.a.createElement(Y,{dateFrom:new Date(this.state.dateFrom).getTime(),dateEnd:new Date(this.state.dateEnd).getTime()}),i.a.createElement("p",null,this.props.chartText.descriptionFuel)))))}}]),t}(i.a.Component),B=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.driverCharts,language:e.initLang.language}})(K),X=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.truckCharts}})(function(e){var t=Object(l.useState)(!0),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!0),u=Object(r.a)(o,2),s=u[0],m=u[1],d=Object(l.useState)({options:{chart:{id:"Driver-Efficency-Chart"},plotOptions:{bar:{horizontal:!0}},yaxis:{labels:{maxWidth:360}},xaxis:{labels:{formatter:function(e){return e.toFixed(2)},trim:!1},categories:[]},theme:{mode:"light",palette:"palette5"}},series:[{name:e.chartText.chartTooltipEfficiency,data:[]}]}),h=Object(r.a)(d,2),f=h[0],p=h[1];Object(l.useEffect)(function(){b(e.dateFrom,e.dateEnd)},[e.dateFrom,e.dateEnd]);var b=function(){var t=encodeURI("from=".concat(e.dateFrom,"&end=").concat(e.dateEnd,"&param=ratio"));m(!0),H.a.get("/system/driversFuelEfficiency?".concat(t)).then(function(e){if(!e.data.length)return m(!1),void c(!0);var t=e.data.map(function(e){return e.driverName}),a=e.data.map(function(e){return e.realAvg.toFixed(2)}),n=[Object(A.a)({},f.series[0],{data:a})],r=Object(A.a)({},f.options,{xaxis:Object(A.a)({},f.options.xaxis,{categories:t})});p({options:r,series:n}),m(!1),c(!1)}).catch(function(){m(!1),c(!0)})};return s?i.a.createElement(R.a,{tip:"Loading..."}):n?i.a.createElement("h4",{style:{color:"#007bff"}},e.chartText.noData):i.a.createElement(W,{options:f.options,series:f.series,type:"bar",height:25*f.options.xaxis.categories.length+100})}),J=E.a.RangePicker,Q=y.a.Panel,Z=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(k.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dateFrom:I()().startOf("month").subtract(1,"month"),dateEnd:I()()},a.onDateChange=function(e,t){a.setState(function(e){return{dateFrom:new Date(t[0]).getTime(),dateEnd:new Date(t[1]).getTime()}})},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e;return i.a.createElement("div",{className:L.a.Fuel},i.a.createElement(y.a,{defaultActiveKey:["1"],expandIconPosition:"right"},i.a.createElement(Q,{header:this.props.chartText.titleEfficiency,key:"1",extra:i.a.createElement(h.a,{type:"setting",onClick:function(e){e.stopPropagation(),console.log("extra")}})},i.a.createElement("span",{style:{marginRight:10}},this.props.chartText.dateChoice),i.a.createElement(J,{locale:"es"===this.props.language?N.a:M.a,allowClear:!1,defaultValue:[I()().startOf("month").subtract(1,"month"),I()()],ranges:(e={},Object(O.a)(e,this.props.chartText.thisMonth,[I()().startOf("month"),I()().endOf("month")]),Object(O.a)(e,this.props.chartText.lastMonth,[I()().startOf("month").subtract(1,"month"),I()().startOf("month").subtract(1,"day")]),e),onChange:this.onDateChange}),i.a.createElement("div",{className:L.a.FuelChart},i.a.createElement(X,{dateFrom:new Date(this.state.dateFrom).getTime(),dateEnd:new Date(this.state.dateEnd).getTime()}),i.a.createElement("p",null,this.props.chartText.descriptionEfficiency)))))}}]),t}(i.a.Component),G=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.driverCharts,language:e.initLang.language}})(Z),$=(a(134),a(131)),ee=a(157),te=$.a.Option,ae=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.oneDriverChart}})(function(e){var t=Object(l.useState)({options:{dataLabels:{enabled:!1},legend:{offsetY:-10},stroke:{width:1,colors:["red","blue"],curve:"smooth"},xaxis:{type:"datetime",categories:[]},tooltip:{x:{format:"dd/MM/yy"}}},series:[{name:e.chartText.mediaReal,data:[]},{name:e.chartText.mediaRoute,data:[]}],loading:!1,noData:!0}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(ee.a).allActiveDrivers,u=Object(l.useState)(!0),s=Object(r.a)(u,2),m=s[0],d=s[1],h=Object(l.useState)(!0),f=Object(r.a)(h,2),p=f[0],b=f[1],g=Object(l.useState)([]),x=Object(r.a)(g,2),v=x[0],y=x[1],E=Object(l.useState)(null),O=Object(r.a)(E,2),T=O[0],j=O[1],k=function(e){b(!0),H.a.get("/system/oneDriverData?driverId="+e).then(function(e){if(!e.data)return b(!1),void d(!0);var t=e.data.datesArr.map(function(e){return I()(e).format("YYYY-MM-DD")}),a=e.data.mediaRealArr,r=e.data.mediaRouteArr,l=[Object(A.a)({},n.series[0],{data:a}),Object(A.a)({},n.series[1],{data:r})],i=Object(A.a)({},n.options,{xaxis:Object(A.a)({},n.options.xaxis,{categories:t})});c({options:i,series:l}),j(e.data._id),b(!1),d(!1)}).catch(function(){b(!1),d(!0)})};return Object(l.useEffect)(function(){o.length?(y(o.map(function(e){return i.a.createElement(te,{value:e._id,key:e._id},e.driverName)})),k(o[0]._id)):(b(!1),d(!0))},[]),Object(l.useEffect)(function(){var t=[Object(A.a)({},n.series[0],{name:e.chartText.mediaReal}),Object(A.a)({},n.series[1],{name:e.chartText.mediaRoute})];c({options:n.options,series:t})},[e.chartText]),p?i.a.createElement(R.a,{tip:"Loading..."}):m?i.a.createElement("h4",{style:{color:"#007bff"}},e.chartText.noData):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{textAlign:"left"}},i.a.createElement("span",{style:{marginRight:30}},e.chartText.selectDriver),i.a.createElement($.a,{defaultValue:T,style:{width:280},onChange:function(e){return k(e)}},v)),i.a.createElement(W,{options:n.options,series:n.series,type:"area",height:"300"}))}),ne=y.a.Panel,re=function(e){function t(){return Object(T.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:L.a.Fuel},i.a.createElement(y.a,{defaultActiveKey:["1"],expandIconPosition:"right"},i.a.createElement(ne,{header:this.props.chartText.title,key:"1"},i.a.createElement("div",{className:L.a.FuelChart},i.a.createElement(ae,null),i.a.createElement("p",null,this.props.chartText.description)))))}}]),t}(i.a.Component),le=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.oneDriverChart,language:e.initLang.language}})(re),ie=a(221),ce=a.n(ie),oe=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.truckCharts}})(function(e){var t=Object(l.useState)(!0),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!0),u=Object(r.a)(o,2),s=u[0],m=u[1],d=Object(l.useState)({options:{chart:{id:"Trucks-Fuel-Chart"},plotOptions:{bar:{horizontal:!0}},yaxis:{labels:{maxWidth:360}},dataLabels:{enabled:!0,offsetX:300,style:{fontSize:"12px",colors:["#fff"]}},xaxis:{min:20,labels:{trim:!1,axisTicks:{show:!0,borderType:"solid",color:"#78909C",height:6,offsetX:0,offsetY:0}},categories:[]},theme:{mode:"light",palette:"palette5"}},series:[{name:e.chartText.chartTooltipFuel,data:[]}]}),h=Object(r.a)(d,2),f=h[0],p=h[1];Object(l.useEffect)(function(){b(e.dateFrom,e.dateEnd)},[e.dateFrom,e.dateEnd]);var b=function(){var t=encodeURI("from=".concat(e.dateFrom,"&end=").concat(e.dateEnd,"&param=mediaReal"));m(!0),H.a.get("/system/trucksFuelEfficiency?".concat(t)).then(function(e){if(!e.data.length)return m(!1),void c(!0);var t=e.data.map(function(e){return e._id}),a=e.data.map(function(e){return e.realAvg.toFixed(2)}),n=[Object(A.a)({},f.series[0],{data:a})],r=Object(A.a)({},f.options,{xaxis:Object(A.a)({},f.options.xaxis,{categories:t})});p({options:r,series:n}),m(!1),c(!1)}).catch(function(){m(!1),c(!0)})};return s?i.a.createElement(R.a,{tip:"Loading..."}):n?i.a.createElement("h4",{style:{color:"#007bff"}},e.chartText.noData):i.a.createElement(W,{options:f.options,series:f.series,type:"bar",height:25*f.options.xaxis.categories.length+100})}),ue=E.a.RangePicker,se=y.a.Panel,me=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(k.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dateFrom:I()().startOf("month").subtract(1,"month"),dateEnd:I()()},a.onDateChange=function(e,t){a.setState(function(e){return{dateFrom:new Date(t[0]).getTime(),dateEnd:new Date(t[1]).getTime()}})},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e;return i.a.createElement("div",{className:ce.a.Fuel},i.a.createElement(y.a,{defaultActiveKey:["1"],expandIconPosition:"right"},i.a.createElement(se,{header:this.props.chartText.titleFuel,key:"1"},i.a.createElement("span",{style:{marginRight:10}},this.props.chartText.dateChoice),i.a.createElement(ue,{locale:"es"===this.props.language?N.a:M.a,allowClear:!1,defaultValue:[I()().startOf("month").subtract(1,"month"),I()()],ranges:(e={},Object(O.a)(e,this.props.chartText.thisMonth,[I()().startOf("month"),I()().endOf("month")]),Object(O.a)(e,this.props.chartText.lastMonth,[I()().startOf("month").subtract(1,"month"),I()().startOf("month").subtract(1,"day")]),e),onChange:this.onDateChange}),i.a.createElement("div",{className:ce.a.FuelChart},i.a.createElement(oe,{dateFrom:new Date(this.state.dateFrom).getTime(),dateEnd:new Date(this.state.dateEnd).getTime()}),i.a.createElement("p",null,this.props.chartText.descriptionFuel)))))}}]),t}(i.a.Component),de=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.truckCharts,language:e.initLang.language}})(me),he=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.driverCharts}})(function(e){var t=Object(l.useState)(!0),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!0),u=Object(r.a)(o,2),s=u[0],m=u[1],d=Object(l.useState)({options:{chart:{id:"Trucks-Efficency-Chart"},plotOptions:{bar:{horizontal:!0}},yaxis:{labels:{maxWidth:360}},xaxis:{labels:{formatter:function(e){return e.toFixed(2)},trim:!1},categories:[]},theme:{mode:"light",palette:"palette5"}},series:[{name:e.chartText.chartTooltipEfficiency,data:[]}]}),h=Object(r.a)(d,2),f=h[0],p=h[1];Object(l.useEffect)(function(){b(e.dateFrom,e.dateEnd)},[e.dateFrom,e.dateEnd]);var b=function(){var t=encodeURI("from=".concat(e.dateFrom,"&end=").concat(e.dateEnd,"&param=ratio"));m(!0),H.a.get("/system/trucksFuelEfficiency?".concat(t)).then(function(e){if(!e.data.length)return m(!1),void c(!0);var t=e.data.map(function(e){return e._id}),a=e.data.map(function(e){return e.realAvg.toFixed(2)}),n=[Object(A.a)({},f.series[0],{data:a})],r=Object(A.a)({},f.options,{xaxis:Object(A.a)({},f.options.xaxis,{categories:t})});p({options:r,series:n}),m(!1),c(!1)}).catch(function(){m(!1),c(!0)})};return s?i.a.createElement(R.a,{tip:"Loading..."}):n?i.a.createElement("h4",{style:{color:"#007bff"}},e.chartText.noData):i.a.createElement(W,{options:f.options,series:f.series,type:"bar",height:25*f.options.xaxis.categories.length+100})}),fe=E.a.RangePicker,pe=y.a.Panel,be=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(k.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={dateFrom:I()().startOf("month").subtract(1,"month"),dateEnd:I()()},a.onDateChange=function(e,t){a.setState(function(e){return{dateFrom:new Date(t[0]).getTime(),dateEnd:new Date(t[1]).getTime()}})},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e;return i.a.createElement("div",{className:ce.a.Fuel},i.a.createElement(y.a,{defaultActiveKey:["1"],expandIconPosition:"right"},i.a.createElement(pe,{header:this.props.chartText.titleEfficiency,key:"1"},i.a.createElement("span",{style:{marginRight:10}},this.props.chartText.dateChoice),i.a.createElement(fe,{locale:"es"===this.props.language?N.a:M.a,allowClear:!1,defaultValue:[I()().startOf("month").subtract(1,"month"),I()()],ranges:(e={},Object(O.a)(e,this.props.chartText.thisMonth,[I()().startOf("month"),I()().endOf("month")]),Object(O.a)(e,this.props.chartText.lastMonth,[I()().startOf("month").subtract(1,"month"),I()().startOf("month").subtract(1,"day")]),e),onChange:this.onDateChange}),i.a.createElement("div",{className:ce.a.FuelChart},i.a.createElement(he,{dateFrom:new Date(this.state.dateFrom).getTime(),dateEnd:new Date(this.state.dateEnd).getTime()}),i.a.createElement("p",null,this.props.chartText.descriptionEfficiency)))))}}]),t}(i.a.Component),ge=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.truckCharts,language:e.initLang.language}})(be),xe=$.a.Option,ve=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.oneTruckChart}})(function(e){var t=Object(l.useState)({options:{dataLabels:{enabled:!1},legend:{offsetY:-10},stroke:{width:1,colors:["red","blue"],curve:"smooth"},xaxis:{type:"datetime",categories:[]},tooltip:{x:{format:"dd/MM/yy"}}},series:[{name:e.chartText.mediaReal,data:[]},{name:e.chartText.mediaRoute,data:[]}],loading:!1,noData:!0}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(ee.a).allActiveTrucks,u=Object(l.useState)(!0),s=Object(r.a)(u,2),m=s[0],d=s[1],h=Object(l.useState)(!0),f=Object(r.a)(h,2),p=f[0],b=f[1],g=Object(l.useState)([]),x=Object(r.a)(g,2),v=x[0],y=x[1],E=Object(l.useState)(null),O=Object(r.a)(E,2),T=O[0],j=O[1],k=function(e){b(!0),H.a.get("/system/oneTruckData?truckId="+e).then(function(e){if(!e.data)return b(!1),void d(!0);var t=e.data.datesArr.map(function(e){return I()(e).format("YYYY-MM-DD")}),a=e.data.mediaRealArr,r=e.data.mediaRouteArr,l=[Object(A.a)({},n.series[0],{data:a}),Object(A.a)({},n.series[1],{data:r})],i=Object(A.a)({},n.options,{xaxis:Object(A.a)({},n.options.xaxis,{categories:t})});c({options:i,series:l}),j(e.data._id),b(!1),d(!1)}).catch(function(){b(!1),d(!0)})};return Object(l.useEffect)(function(){o.length?(y(o.map(function(e){return i.a.createElement(xe,{value:e._id,key:e._id},e._id)})),k(o[0]._id)):(b(!1),d(!0))},[]),Object(l.useEffect)(function(){var t=[Object(A.a)({},n.series[0],{name:e.chartText.mediaReal}),Object(A.a)({},n.series[1],{name:e.chartText.mediaRoute})];c({options:n.options,series:t})},[e.chartText]),p?i.a.createElement(R.a,{tip:"Loading..."}):m?i.a.createElement("h4",{style:{color:"#007bff"}},e.chartText.noData):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{textAlign:"left"}},i.a.createElement("span",{style:{marginRight:30}},e.chartText.selectTruck),i.a.createElement($.a,{defaultValue:T,style:{width:280},onChange:function(e){return k(e)}},v)),i.a.createElement(W,{options:n.options,series:n.series,type:"area",height:"300"}))}),ye=y.a.Panel,Ee=function(e){function t(){return Object(T.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:ce.a.Fuel},i.a.createElement(y.a,{defaultActiveKey:["1"],expandIconPosition:"right"},i.a.createElement(ye,{header:this.props.chartText.title,key:"1"},i.a.createElement("div",{className:ce.a.FuelChart},i.a.createElement(ve,null),i.a.createElement("p",null,this.props.chartText.description)))))}}]),t}(i.a.Component),Oe=Object(c.b)(function(e){return{chartText:e.initLang.textOwner.oneTruckChart,language:e.initLang.language}})(Ee),Te=(a(272),a(270)),je=$.a.Option,ke=E.a.RangePicker,we=Object(c.b)(function(e){return{text:e.initLang.textOwner.routes,language:e.initLang.textHome.language}},function(e){return{getTruck:function(t,a,n){return e(o.truckRoutesProcess(t,a,n))}}})(function(e){var t,a=Object(l.useState)([]),n=Object(r.a)(a,2),c=n[0],o=n[1],u=Object(l.useState)(null),s=Object(r.a)(u,2),m=s[0],d=s[1],h=Object(l.useState)(new Date(I()().startOf("month").subtract(1,"month")).getTime()),f=Object(r.a)(h,2),p=f[0],b=f[1],g=Object(l.useState)(new Date(I()()).getTime()),x=Object(r.a)(g,2),v=x[0],y=x[1];Object(l.useEffect)(function(){H.a.get("/system/allTrucks").then(function(e){e.data.length&&o(e.data.map(function(e){return e.routesLength?i.a.createElement(je,{value:e._id,key:e._id},e._id):null}))}).catch(function(e){return console.log(e.message.data)})},[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,e.text.selectTruck),i.a.createElement($.a,{defaultValue:"--------------------------------------",style:{width:280,margin:15},onChange:function(t){return d(a=t),void e.getTruck(a,p,v);var a}},c),i.a.createElement("span",{style:{margin:"0 15px"}},e.text.dateChoice),i.a.createElement(ke,{locale:"es"===e.language?N.a:M.a,allowClear:!1,disabled:!m,defaultValue:[I()().startOf("month").subtract(1,"month"),I()()],ranges:(t={},Object(O.a)(t,e.text.thisMonth,[I()().startOf("month"),I()().endOf("month")]),Object(O.a)(t,e.text.lastMonth,[I()().startOf("month").subtract(1,"month"),I()().startOf("month").subtract(1,"day")]),t),onChange:function(t,a){var n=new Date(a[0]).getTime(),r=new Date(a[1]).getTime();b(n),y(r),e.getTruck(m,n,r)}}))}),Ce=a(252),Se=a.n(Ce),Le=Object(c.b)(function(e){return{routes:e.truckRoutes.truckRoutes,isLoading:e.truckRoutes.isLoading,truckId:e.truckRoutes.truckId,text:e.initLang.textOwner.routes}})(function(e){var t=Object(l.useState)([]),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useRef)(),u=Object(l.useContext)(ee.a).allActiveDrivers;Object(l.useEffect)(function(){if(void 0!==e.routes&&e.routes.length){var t=e.routes.sort(function(e,t){return t._id-e._id});c(t.map(function(t){var a=u.find(function(e){return e._id===t.driverId}),n="";return a&&(n=a.driverName),Object(A.a)({},t,{driverId:n,dtStop:new Date(t.dtStop).toLocaleDateString(),type:s(t.type),full:t.full?e.text.yes:3===t.type?e.text.no:"-",tonIn:1===t.type?t.tonOut+" t.":"-",tonOut:2===t.type?t.tonIn-t.tonOut+" t.":"-",key:t._id,litres:3===t.type?t.litres+" l.":"-",comments:""})}))}else c([])},[e.routes,e.text]);var s=function(t){switch(t){case 1:return e.text.loading;case 2:return e.text.unloading;case 3:return e.text.fuel;case 4:return e.text.periodEnd;case 5:return e.text.driversChange;default:return""}},m=[{title:e.text.date,dataIndex:"dtStop",width:150},{title:e.text.driver,dataIndex:"driverId",width:250},{title:e.text.action,dataIndex:"type",width:150},{title:e.text.country,dataIndex:"country",width:150},{title:e.text.zip,dataIndex:"postal",width:100},{title:e.text.loading,dataIndex:"tonIn",width:90},{title:e.text.unloading,dataIndex:"tonOut",width:90},{title:e.text.fuel,dataIndex:"litres",width:100},{title:e.text.full,dataIndex:"full",width:90},{title:e.text.count,dataIndex:"kmStop",width:90},{title:e.text.comments,dataIndex:"comments"}];return i.a.createElement("div",{style:{margin:30},ref:o},i.a.createElement(Te.a,{columns:m,dataSource:n,bordered:!0,loading:e.isLoading,size:"middle",pagination:!1,title:function(){return i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",null,i.a.createElement(we,null)),i.a.createElement(Se.a,{trigger:function(){return i.a.createElement(f.a,null,i.a.createElement(h.a,{type:"printer"}))},content:function(){return o.current}}))},footer:function(){return e.text.registration+" "+(e.truckId?e.truckId:"")}}))}),De=Object(c.b)(function(e){return{titleText:e.initLang.textOwner.inside}})(function(e){return i.a.createElement("div",{className:"container-fluid mx-auto p-5",style:{height:"92vh",overflowY:"scroll"}},i.a.createElement(v.a,null,e.titleText.driversTitle),i.a.createElement("div",{className:"row mx-auto"},i.a.createElement("div",{className:"col-md-12 col-lg-6 d-flex justify-content-center"},i.a.createElement(B,null)),i.a.createElement("div",{className:"col-md-12 col-lg-6 d-flex justify-content-center"},i.a.createElement(G,null))),i.a.createElement("div",{className:"row mx-auto pt-5 mb-5"},i.a.createElement("div",{className:"col-xs-12 col-sm-12 mx-auto"},i.a.createElement(le,null))),i.a.createElement(v.a,null,e.titleText.trucksTitle),i.a.createElement("div",{className:"row mx-auto mt-4"},i.a.createElement("div",{className:"col-md-12 col-lg-6 d-flex justify-content-center"},i.a.createElement(de,null)),i.a.createElement("div",{className:"col-md-12 col-lg-6 d-flex justify-content-center"},i.a.createElement(ge,null))),i.a.createElement("div",{className:"row mx-auto pt-5 mb-5"},i.a.createElement("div",{className:"col-xs-12 col-sm-12 mx-auto"},i.a.createElement(Oe,null))),i.a.createElement(v.a,null,e.titleText.routesTitle),i.a.createElement("div",{className:"row mx-auto mb-5"},i.a.createElement("div",{className:"col-xs-12 col-sm-12 mx-auto"},i.a.createElement(Le,null))))}),Ne=(a(130),a(132)),_e=a(268),Me=a(9),Fe=Object(c.b)(function(e){return{instrText:e.initLang.textOwner.driverInstruction}})(function(e){var t=Object(l.useRef)();return i.a.createElement(n.a,{visible:e.visible,title:e.instrText.title,width:"50vw",onCancel:function(){return e.onClose()},footer:[i.a.createElement(Se.a,{trigger:function(){return i.a.createElement(f.a,null,i.a.createElement(h.a,{type:"printer"}))},content:function(){return t.current}}),i.a.createElement(f.a,{key:"back",onClick:function(){return e.onClose()}},"OK")]},i.a.createElement("div",{ref:t,style:{margin:30}},i.a.createElement("h5",null,e.instrText.driver+": "+e.name+" "+e.lastName),i.a.createElement("h6",null,e.instrText.id+" "+e.id),i.a.createElement("hr",null),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.instrText.instruction}})))}),Ie=a(121),Re=a(37),Ae=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,driversText:e.initLang.textOwner.driversForm,demo:e.authReducer.demo}})(function(e){var t=Object(l.useState)({name:{elementType:"input",elementConfig:{placeholder:e.driversText.name,type:"text"},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text"},value:"",placeholder:e.driversText.lastName,validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},document:{elementType:"input",elementConfig:{placeholder:e.driversText.document,type:"text"},value:"",validation:{required:!0,minLength:6,maxLength:20},valid:!1,touched:!1}}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.showAddDriver,m=o.setShowAddDriver,d=Object(l.useState)(!1),h=Object(r.a)(d,2),f=h[0],p=h[1],b=Object(l.useState)(null),g=Object(r.a)(b,2),x=g[0],v=g[1],y=Object(l.useState)(null),E=Object(r.a)(y,2),O=E[0],T=E[1],j=Object(l.useState)(!1),k=Object(r.a)(j,2),w=k[0],C=k[1],S=Object(l.useState)(!1),L=Object(r.a)(S,2),D=L[0],N=L[1],_=[],M=[];for(var F in n)_.push({id:F,config:n[F]}),M.push(F);Object(l.useEffect)(function(){Object(Me.i)(n,C)},[n]),Object(l.useEffect)(function(){Object(Me.b)(n,M,e.driversText,c)},[e.driversText]);var I=function(){Object(Me.a)(n,M,c),m(!1),v(null),T(null),N(!1)},R=_.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(Me.f)(t,n,e.id,c)}})}),A=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.driversText.addPanelName),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},R,i.a.createElement("button",{className:"btn btn-primary btn-sm",type:"button",disabled:!w||f,onClick:function(){e.demo?e.demoModal(!0):new _e.a({id:n.document.value.toLowerCase().trim(),Driver:{name:n.name.value.trim(),lastName:n.lastName.value.trim(),date:(new Date).getTime(),routes:[]}}).addDriver(v,N,T,p)},style:{margin:"1rem"}},e.driversText?e.driversText.submit:null)));return x?i.a.createElement(Fe,{visible:D,onClose:I,name:x.name,lastName:x.lastName,id:x.id}):i.a.createElement(Ne.a,{visible:s,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:I},O?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[O]?e.errorText[O]:e.driversText.addDriverError)):f?i.a.createElement(Re.a,null):A,i.a.createElement("button",{onClick:I,className:"btn btn-secondary btn-sm"},e.driversText?e.driversText.cancel:null))}),Pe=function(){function e(t){var a=t.id,n=t.Truck,r=t.newData,l=t.date;Object(T.a)(this,e),this.truckData={id:a,Truck:n,newData:r,date:l}}return Object(j.a)(e,[{key:"addTruck",value:function(e,t,a){a(!0),H.a.post("/system/addTruck",this.truckData).then(function(t){e(t.data),a(!1)}).catch(function(e){t(e.response.data.toString()),a(!1)})}},{key:"updateTruck",value:function(e,t,a,n){a(!0),H.a.put("/system/update",this.truckData).then(function(t){e(t.data),a(!1),n()}).catch(function(e){t(e.response.data.toString()),a(!1)})}},{key:"deleteTruck",value:function(e,t,a,n){a(!0),H.a.delete("/system/update",{data:this.truckData}).then(function(t){e(t.data),a(!1),n()}).catch(function(e){t(e.response.data.toString()),a(!1)})}},{key:"theft",value:function(e,t,a){a(!0),H.a.put("/system/theft",this.truckData).then(function(t){e(t.data),a(!1)}).catch(function(e){t(e.response.data.toString()),a(!1)})}}]),e}(),qe=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,trucksText:e.initLang.textOwner.trucksForm,demo:e.authReducer.demo}})(function(e){var t=Object(l.useState)({name:{elementType:"input",label:e.trucksText.name,elementConfig:{type:"text"},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},consum:{elementType:"input",label:e.trucksText.consum,elementConfig:{type:"number"},value:24,validation:{required:!0,minLength:2,maxLength:2},valid:!0,touched:!0},norm:{elementType:"input",label:e.trucksText.norm,elementConfig:{type:"number",step:.1},value:.4,validation:{required:!0,minLength:3,maxLength:4},valid:!0,touched:!0},id:{elementType:"input",label:e.trucksText.id,elementConfig:{type:"text"},value:"",validation:{required:!0,minLength:3,maxLength:10},valid:!1,touched:!1}}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.showAddTruck,m=o.setShowAddTruck,d=Object(l.useState)(!1),h=Object(r.a)(d,2),f=h[0],p=h[1],b=Object(l.useState)(null),g=Object(r.a)(b,2),x=g[0],v=g[1],y=Object(l.useState)(null),E=Object(r.a)(y,2),O=E[0],T=E[1],j=Object(l.useState)(!1),k=Object(r.a)(j,2),w=k[0],C=k[1],S=[],L=[];for(var D in n)S.push({id:D,config:n[D]}),L.push(D);Object(l.useEffect)(function(){Object(Me.i)(n,C)},[n]),Object(l.useEffect)(function(){Object(Me.c)(n,L,e.trucksText,c)},[e.trucksText]);var N=function(){Object(Me.a)(n,L,c),m(!1),v(null),T(null)},_=S.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(Me.f)(t,n,e.id,c)}})}),M=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.trucksText.addPanelName),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},_,i.a.createElement("button",{className:"btn btn-primary btn-sm",type:"button",disabled:!w||f,onClick:function(){e.demo?e.demoModal(!0):new Pe({id:n.id.value.toUpperCase().trim(),Truck:{name:n.name.value.trim(),consum:Number(n.consum.value),norm:Number(n.norm.value),date:(new Date).getTime(),fuel:[],routes:[],paid:(new Date).getTime()+3456e6}}).addTruck(v,T,p)},style:{margin:"1rem"}},e.trucksText?e.trucksText.submit:null)));return i.a.createElement(Ne.a,{visible:s,placement:"left",closable:!1,style:{textAlign:"center"},width:"auto",onClose:N},x?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.trucksText.addTruckSuccess),i.a.createElement("h6",null,x)):O?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[O]?e.errorText[O]:e.trucksText.addTruckError)):f?i.a.createElement(Re.a,null):M,i.a.createElement("button",{onClick:N,style:{margin:"auto"},className:"btn btn-secondary btn-sm"},e.trucksText?e.trucksText.cancel:null))}),We=a(23),Ve=a.n(We),He=$.a.Option,Ye=n.a.confirm,ze=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,trucksText:e.initLang.textOwner.trucksForm,textMenu:e.initLang.textOwner.userMenu,demo:e.authReducer.demo}})(function(e){var t=Object(l.useState)({name:{elementType:"input",label:e.trucksText.name,elementConfig:{type:"text"},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},consum:{elementType:"input",label:e.trucksText.consum,elementConfig:{type:"number"},value:0,validation:{required:!0,minLength:2,maxLength:2},valid:!0,touched:!1},norm:{elementType:"input",label:e.trucksText.norm,elementConfig:{type:"number",step:.1},value:0,validation:{required:!0,minLength:3,maxLength:4},valid:!0,touched:!1},_id:{elementType:"input",label:e.trucksText.id,elementConfig:{type:"text",disabled:!0},value:"",validation:{required:!0,minLength:3,maxLength:10},valid:!1,touched:!1}}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.showEditTruck,m=o.setShowEditTruck,d=Object(l.useState)([]),h=Object(r.a)(d,2),p=h[0],b=h[1],g=Object(l.useState)(!1),x=Object(r.a)(g,2),v=x[0],y=x[1],E=Object(l.useState)(null),O=Object(r.a)(E,2),T=O[0],j=O[1],k=Object(l.useState)(null),w=Object(r.a)(k,2),C=w[0],S=w[1],L=Object(l.useState)(!1),D=Object(r.a)(L,2),N=D[0],_=D[1],M=i.a.createElement(He,null),F=[],I=[];for(var R in n)F.push({id:R,config:n[R]}),I.push(R);var A=function(){y(!0),H.a.get("/system/allTrucks").then(function(e){b(e.data),y(!1)}).catch(function(e){y(!1),S(e)})};Object(l.useEffect)(function(){s&&A()},[s]),Object(l.useEffect)(function(){Object(Me.i)(n,_)},[n]),Object(l.useEffect)(function(){Object(Me.c)(n,I,e.trucksText,c)},[e.trucksText]);var P=function(){Object(Me.a)(n,I,c),m(!1),j(null),S(null),y(!0),q()},q=function(){setTimeout(function(){y(!1)},10)},W=F.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(Me.f)(t,n,e.id,c)}})});p.length&&(M=p.map(function(e){return i.a.createElement(He,{value:e._id,key:e._id},e._id)}));var V=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.trucksText.editPanelName),i.a.createElement("p",null,e.trucksText.choiceTruck),i.a.createElement($.a,{style:{width:"100%"},onChange:function(e){return function(e){var t=p.find(function(t){return t._id===e}),a=Ve.a.cloneDeep(n);I.forEach(function(e){a[e].value=t[e],a[e].valid=!0,a[e].touched=!0}),c(a)}(e)},defaultValue:e.textMenu.trucks},M),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},W,i.a.createElement(f.a,{disabled:!N||v,onClick:function(){e.demo?e.demoModal(!0):new Pe({id:n._id.value.toUpperCase().trim(),newData:{"Truck.name":n.name.value.trim(),"Truck.consum":Number(n.consum.value),"Truck.norm":Number(n.norm.value)}}).updateTruck(j,S,y,A)}},e.trucksText?e.trucksText.submitChange:""),i.a.createElement(f.a,{type:"danger",disabled:!N||v,style:{margin:"1rem"},onClick:function(){if(e.demo)e.demoModal(!0);else{var t=new Pe({id:n._id.value.toUpperCase().trim()});Ye({title:n._id.value,content:e.trucksText.deleteConfirm,onOk:function(){t.deleteTruck(j,S,y,A)},onCancel:function(){}})}}},e.trucksText?e.trucksText.delete:"")));return i.a.createElement(Ne.a,{visible:s,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:P},p.length?T?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.trucksText.editTruckSuccess),i.a.createElement("h6",null,T)):C?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[C]?e.errorText[C]:e.trucksText.addTruckError)):v?i.a.createElement(Re.a,null):V:i.a.createElement("h6",{style:{margin:20,color:"rgba(43, 144, 143, 0.85)"}},e.trucksText.noTrucks),i.a.createElement(f.a,{onClick:P},e.trucksText?e.trucksText.cancel:""))}),Ue=$.a.Option,Ke=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,trucksText:e.initLang.textOwner.trucksForm,demo:e.authReducer.demo}})(function(e){var t=Object(l.useContext)(u.a),a=t.showTheft,n=t.setShowTheft,c=Object(l.useContext)(ee.a),o=c.allActiveTrucks,s=c.getActiveTrucks,m=Object(l.useState)([]),d=Object(r.a)(m,2),h=d[0],p=d[1],b=Object(l.useState)(null),g=Object(r.a)(b,2),x=g[0],v=g[1],y=Object(l.useState)(null),O=Object(r.a)(y,2),T=O[0],j=O[1],k=Object(l.useState)(!1),w=Object(r.a)(k,2),C=w[0],S=w[1],L=Object(l.useState)(null),D=Object(r.a)(L,2),N=D[0],_=D[1],M=Object(l.useState)(null),F=Object(r.a)(M,2),I=F[0],R=F[1];Object(l.useEffect)(function(){o.length&&p(o.map(function(e){return i.a.createElement(Ue,{value:e._id,key:e._id},e._id)}))},[]);var A=function(){N&&s(),n(!1),_(null),R(null),S(!0),P()},P=function(){setTimeout(function(){S(!1)},10)},q=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.trucksText.theftPanelName),i.a.createElement("p",null,e.trucksText.theftPanelDescription),i.a.createElement("p",null,e.trucksText.choiceTheftData),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},i.a.createElement($.a,{style:{width:240,margin:"20px 0"},onChange:function(e){return v(e)},defaultValue:"-------------------------------"},h),i.a.createElement("br",null),i.a.createElement(E.a,{style:{width:240,marginBottom:35},onChange:function(e){return j(e._d.getTime())}}),i.a.createElement("br",null),i.a.createElement(f.a,{style:{marginRight:20},disabled:!x||!T||C,onClick:function(t){t.preventDefault(),e.demo?e.demoModal(!0):new Pe({id:x,date:T}).theft(_,R,S)}},e.trucksText?e.trucksText.theftSubmit:"")));return i.a.createElement(Ne.a,{visible:a,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:A},o.length?N?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.trucksText.theftSuccess),i.a.createElement("h6",null,N)):I?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[I]?e.errorText[I]:e.trucksText.theftError)):C?i.a.createElement(Re.a,null):q:i.a.createElement("h6",{style:{margin:20,color:"rgba(43, 144, 143, 0.85)"}},e.trucksText.noTrucks),i.a.createElement(f.a,{onClick:A},e.trucksText?e.trucksText.cancel:""))}),Be=function(){function e(t){var a=t.id,n=t.dataSet,r=t.newData;Object(T.a)(this,e),this.workerData={id:a,dataSet:n,newData:r}}return Object(j.a)(e,[{key:"addWorker",value:function(e,t,a){a(!0),H.a.post("api/workers/addWorker",this.workerData).then(function(t){e(t.data),a(!1)}).catch(function(e){t(e.response.data.toString()),a(!1)})}},{key:"updateWorker",value:function(e,t,a,n){a(!0),H.a.put("/api/workers/editWorker",this.workerData).then(function(t){e(t.data),a(!1),n()}).catch(function(e){t(e.response.data.toString()),a(!1)})}},{key:"deleteWorker",value:function(e,t,a,n){a(!0),H.a.delete("/api/workers/delWorker",{data:this.workerData}).then(function(t){e(t.data),a(!1),n()}).catch(function(e){t(e.response.data.toString()),a(!1)})}}]),e}(),Xe=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,registerText:e.initLang.textHome.registerForm,workerText:e.initLang.textOwner.workerForm,perm:e.authReducer.perm,demo:e.authReducer.demo}})(function(e){var t=Object(l.useState)({name:{elementType:"input",elementConfig:{placeholder:e.workerText.name,type:"text"},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text",placeholder:e.workerText.lastName},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:e.workerText.email},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},email2:{elementType:"input",elementConfig:{type:"email",placeholder:e.workerText.email2},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:e.workerText.password},value:"",validation:{required:!0,minLength:4,maxLength:50},valid:!1,touched:!1},password2:{elementType:"input",elementConfig:{type:"password",placeholder:e.workerText.password2},value:"",validation:{required:!0,minLength:4,maxLength:50},valid:!1,touched:!1}}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.showAddWorker,m=o.setShowAddWorker,d=Object(l.useState)(!1),h=Object(r.a)(d,2),f=h[0],p=h[1],b=Object(l.useState)(null),g=Object(r.a)(b,2),x=g[0],v=g[1],y=Object(l.useState)(null),E=Object(r.a)(y,2),O=E[0],T=E[1],j=Object(l.useState)(!1),k=Object(r.a)(j,2),w=k[0],C=k[1],S=Object(l.useState)(null),L=Object(r.a)(S,2),D=L[0],N=L[1],_=[],M=[];for(var F in n)_.push({id:F,config:n[F]}),M.push(F);Object(l.useEffect)(function(){Object(Me.i)(n,C),D&&N(null)},[n]),Object(l.useEffect)(function(){Object(Me.b)(n,M,e.workerText,c)},[e.workerText]);var I=function(){e.demo?e.demoModal(!0):new Be({dataSet:{name:n.name.value.trim(),lastName:n.lastName.value.trim(),email:n.email.value.trim(),password:n.password.value.trim()}}).addWorker(v,T,p)},R=function(){Object(Me.a)(n,M,c),m(!1),v(null),T(null)},A=_.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(Me.f)(t,n,e.id,c)}})}),P=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",{style:{marginBottom:"2rem"}},e.workerText.addPanelName),i.a.createElement("p",null,e.workerText.restrictionText),i.a.createElement("p",null,e.workerText.addPanelDescripton),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},A,i.a.createElement("p",{style:{color:"red"}},"email"===D?e.registerText.emailNotIdentity:"password"===D?e.registerText.passwordNotIdentity:null),i.a.createElement("button",{className:"btn btn-primary btn-sm",type:"button",disabled:!w||f||!e.perm,onClick:function(){return Object(Me.d)(n.email.value,n.email2.value)?Object(Me.d)(n.password.value,n.password2.value)?void I():(C(!1),void N("password")):(C(!1),void N("email"))},style:{marginRight:"1rem"}},e.workerText?e.workerText.submit:"")));return i.a.createElement(Ne.a,{visible:s,placement:"left",closable:!1,style:{textAlign:"center"},width:"auto",onClose:R},x?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.workerText.addWorkerSuccess),i.a.createElement("h6",null,x)):O?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[O]?e.errorText[O]:e.workerText.addWorkerError)):f?i.a.createElement(Re.a,null):P,i.a.createElement("button",{onClick:R,style:{margin:"auto"},className:"btn btn-secondary btn-sm"},e.workerText?e.workerText.cancel:""))}),Je=$.a.Option,Qe=n.a.confirm,Ze=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,workerText:e.initLang.textOwner.workerForm,textMenu:e.initLang.textOwner.userMenu,perm:e.authReducer.perm,demo:e.authReducer.demo}})(function(e){var t=Object(l.useState)({name:{elementType:"input",elementConfig:{placeholder:e.workerText.name,type:"text"},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text",placeholder:e.workerText.lastName},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:e.workerText.email},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:e.workerText.password3},value:"",validation:{required:!0,minLength:4,maxLength:50},valid:!1,touched:!1}}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.showEditWorker,m=o.setShowEditWorker,d=Object(l.useState)([]),h=Object(r.a)(d,2),p=h[0],b=h[1],g=Object(l.useState)(null),x=Object(r.a)(g,2),v=x[0],y=x[1],E=Object(l.useState)(!1),O=Object(r.a)(E,2),T=O[0],j=O[1],k=Object(l.useState)(null),w=Object(r.a)(k,2),C=w[0],S=w[1],L=Object(l.useState)(null),D=Object(r.a)(L,2),N=D[0],_=D[1],M=Object(l.useState)(!1),F=Object(r.a)(M,2),I=F[0],R=F[1],A=i.a.createElement(Je,null),P=[],q=[];for(var W in n)P.push({id:W,config:n[W]}),q.push(W);var V=function(){j(!0),H.a.get("/api/workers/getWorkers").then(function(e){b(e.data),j(!1)}).catch(function(e){console.log(e),j(!1),_(e)})};Object(l.useEffect)(function(){s&&V()},[s]),Object(l.useEffect)(function(){Object(Me.i)(n,R)},[n]),Object(l.useEffect)(function(){Object(Me.b)(n,q,e.workerText,c)},[e.workerText]);var Y=function(){Object(Me.a)(n,q,c),m(!1),S(null),_(null),j(!0),z()},z=function(){setTimeout(function(){j(!1)},10)},U=P.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(Me.f)(t,n,e.id,c)}})});p.length&&(A=p.map(function(e){return i.a.createElement(Je,{value:e.email,key:e.email},e.lastName+" "+e.name)}));var K=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.workerText.editPanelName),i.a.createElement("p",null,e.workerText.restrictionText),i.a.createElement("p",null,e.workerText.choiceWorker),i.a.createElement($.a,{style:{width:"100%"},onChange:function(e){return function(e){y(e);var t=p.find(function(t){return t.email===e}),a=Ve.a.cloneDeep(n);q.forEach(function(e){a[e].value=t[e],a[e].valid=!0,a[e].touched=!0}),a.password.valid=!1,c(a)}(e)},defaultValue:e.textMenu.workers},A),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},U,i.a.createElement(f.a,{onClick:function(){e.demo?e.demoModal(!0):new Be({id:v,newData:{name:n.name.value.trim(),lastName:n.lastName.value.trim(),email:n.email.value.trim(),password:n.password.value.trim()}}).updateWorker(S,_,j,V)},disabled:!I||T||!e.perm},e.workerText?e.workerText.submitChange:""),i.a.createElement(f.a,{type:"danger",disabled:!I||T||!e.perm,style:{margin:"1rem"},onClick:function(){if(e.demo)e.demoModal(!0);else{var t=new Be({id:n.email.value.trim()});Qe({title:n.name.value+" "+n.lastName.value,content:e.workerText.deleteConfirm,onOk:function(){t.deleteWorker(S,_,j,V)},onCancel:function(){}})}}},e.workerText?e.workerText.delete:"")));return i.a.createElement(Ne.a,{visible:s,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:Y},p.length?C?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.workerText.editWorkerSuccess),i.a.createElement("h6",null,1===C?n.name.value+" "+n.lastName.value:C)):N?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[N]?e.errorText[N]:e.workerText.addWorkerError)):T?i.a.createElement(Re.a,null):K:i.a.createElement("h6",{style:{margin:20,color:"rgba(43, 144, 143, 0.85)"}},e.workerText.noWorkers),i.a.createElement(f.a,{onClick:Y},e.workerText?e.workerText.cancel:""))}),Ge=a(27),$e=n.a.confirm,et=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,cText:e.initLang.textOwner.companyEdit,registerText:e.initLang.textHome.registerForm,textMenu:e.initLang.textOwner.userMenu,restrictionText:e.initLang.textOwner.workerForm.restrictionText,perm:e.authReducer.perm,demo:e.authReducer.demo}},function(e){return{onLogout:function(){return e(o.logoutUser())}}})(function(e){var t=Object(l.useState)({name:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.name},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.lastName},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},company:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.company},value:"",validation:{required:!0,minLength:2,maxLength:30},valid:!1,touched:!1},nip:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.nip},value:"",validation:{required:!0,minLength:6,maxLength:20},valid:!1,touched:!1},street:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.street},value:"",validation:{required:!0,minLength:2,maxLength:40},valid:!1,touched:!1},city:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.city},value:"",validation:{required:!0,minLength:2,maxLength:30},valid:!1,touched:!1},post:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.post},value:"",validation:{required:!0,minLength:2,maxLength:10},valid:!1,touched:!1},country:{elementType:"input",elementConfig:{type:"text",placeholder:e.registerText.country},value:"",validation:{required:!0,minLength:2,maxLength:30},valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:e.registerText.email},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},email2:{elementType:"input",elementConfig:{type:"email",placeholder:e.registerText.email2},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:e.registerText.password3},value:"",validation:{required:!0,minLength:4,maxLength:50},valid:!1,touched:!1},password2:{elementType:"input",elementConfig:{type:"password",placeholder:e.registerText.password2},value:"",validation:{required:!0,minLength:4,maxLength:50},valid:!1,touched:!1}}),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(u.a),s=o.showEditCompany,m=o.setShowEditCompany,d=Object(l.useContext)(Ge.a).setShowOwner,h=Object(l.useState)(!1),p=Object(r.a)(h,2),b=p[0],g=p[1],x=Object(l.useState)(null),v=Object(r.a)(x,2),y=v[0],E=v[1],O=Object(l.useState)(null),T=Object(r.a)(O,2),j=T[0],k=T[1],w=Object(l.useState)(!1),C=Object(r.a)(w,2),S=C[0],L=C[1],D=Object(l.useState)(null),N=Object(r.a)(D,2),_=N[0],M=N[1],F=[],I=[];for(var R in n)F.push({id:R,config:n[R]}),I.push(R);Object(l.useEffect)(function(){s&&(g(!0),H.a.get("/api/users/findUser").then(function(e){A(e.data),g(!1)}).catch(function(e){g(!1),k(e.response.data)}))},[s]),Object(l.useEffect)(function(){Object(Me.i)(n,L),_&&M(null)},[n]),Object(l.useEffect)(function(){Object(Me.b)(n,I,e.registerText,c)},[e.registerText]);var A=function(e){var t=Ve.a.cloneDeep(n);I.forEach(function(a){t[a].value=e[a],t[a].valid=!0,t[a].touched=!0}),t.password.valid=!1,t.password2.valid=!1,c(t)},P=function(){if(e.demo)e.demoModal(!0);else{var t={dataSet:{name:n.name.value,lastName:n.lastName.value,company:n.company.value,nip:n.nip.value,street:n.street.value,city:n.city.value,post:n.post.value,country:n.country.value,email:n.email.value,password:n.password.value}};g(!0),H.a.put("api/users",t).then(function(e){200===e.status&&(E(!0),g(!1))}).catch(function(e){k(e.response.data.toString()),g(!1)})}},q=function(){Object(Me.a)(n,I,c),m(!1),E(null),k(null),g(!0),W()},W=function(){setTimeout(function(){g(!1)},10)},V=F.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(Me.f)(t,n,e.id,c)}})}),Y=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.cText.panelName),i.a.createElement("p",null,e.restrictionText),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},V,i.a.createElement("p",{style:{color:"red"}},"email"===_?e.registerText.emailNotIdentity:"password"===_?e.registerText.passwordNotIdentity:null),i.a.createElement(f.a,{disabled:!S||b||!e.perm,onClick:function(){return Object(Me.d)(n.email.value,n.email2.value)?Object(Me.d)(n.password.value,n.password2.value)?void P():(L(!1),void M("password")):(L(!1),void M("email"))}},e.cText?e.cText.submitChange:""),i.a.createElement(f.a,{type:"danger",disabled:!S||b||!e.perm,style:{margin:"1rem"},onClick:function(){e.demo?e.demoModal(!0):$e({title:n.company.value,content:e.cText.deleteConfirm,onOk:function(){g(!0),H.a.delete("api/users").then(function(t){200===t.status&&(d(!1),e.onLogout())}).catch(function(e){k(e.response.data.toString()),g(!1)})},onCancel:function(){}})}},e.cText?e.cText.delete:"")));return i.a.createElement(Ne.a,{visible:s,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:q},y?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.cText.editCompanySuccess)):j?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[j]?e.errorText[j]:e.cText.addWorkerError)):b?i.a.createElement(Re.a,null):Y,i.a.createElement(f.a,{onClick:q},e.cText?e.cText.cancel:""))}),tt=(a(494),a(497)),at=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,payText:e.initLang.textOwner.companyPayment}})(function(e){var t=Object(l.useContext)(u.a),a=t.showPayments,n=t.setShowPayments,c=Object(l.useState)([]),o=Object(r.a)(c,2),s=o[0],m=o[1],d=Object(l.useState)([]),h=Object(r.a)(d,2),f=h[0],p=h[1],b=Object(l.useState)({}),g=Object(r.a)(b,2),x=g[0],v=g[1],y=Object(l.useState)(0),E=Object(r.a)(y,2),O=E[0],T=E[1],j=Object(l.useState)(!1),k=Object(r.a)(j,2),w=k[0],C=k[1],S=Object(l.useState)(null),L=Object(r.a)(S,2),D=L[0],N=L[1],_=Number(Date.now())+9999e5,M=[{title:e.payText.registration,dataIndex:"registration",render:function(e){return i.a.createElement("h6",{style:{color:"#1890ff"}},e)}},{title:e.payText.paidTo,dataIndex:"paidTo",render:function(e){var t;return t=e<_?"red":"#1890ff",e=new Date(e).toLocaleDateString(),i.a.createElement("h6",{style:{color:t}},e)}},{title:e.payText.buy4M,dataIndex:"buy4M"},{title:e.payText.buy8M,dataIndex:"buy8M"},{title:e.payText.buy12M,dataIndex:"buy12M"},{title:e.payText.basket,dataIndex:"basket",render:function(t){return i.a.createElement("h6",{style:{color:"#1890ff"}},t?t+e.payText.currency:null)}}];Object(l.useEffect)(function(){a&&(C(!0),H.a.get("/system/allTrucks").then(function(e){m(e.data),C(!1)}).catch(function(e){C(!1),N(e.response.data.toString())}))},[a]),Object(l.useEffect)(function(){if(s.length){var e={};s.forEach(function(t){return e[t._id]={id:null,value:null}}),v(e)}},[s]),Object(l.useEffect)(function(){s.length&&p(s.map(function(e){return{registration:e._id,paidTo:e.paid,buy4M:i.a.createElement(tt.a,{name:e._id,value:48,id:e._id+"_122",onChange:function(e,t){return F(e,t.target)},checked:x[e._id].id===e._id+"_122"}),buy8M:i.a.createElement(tt.a,{name:e._id,value:80,id:e._id+"_244",onChange:function(e,t){return F(e,t.target)},checked:x[e._id].id===e._id+"_244"}),buy12M:i.a.createElement(tt.a,{name:e._id,value:96,id:e._id+"_365",onChange:function(e,t){return F(e,t.target)},checked:x[e._id].id===e._id+"_365"}),basket:x[e._id].value,key:e._id}}))},[x]);var F=function(e,t){var a=Ve.a.cloneDeep(x);e?(a[t.name].id=t.id,a[t.name].value=t.value):(a[t.name].id=null,a[t.name].value=null),v(a),I(a)},I=function(e){var t=0;for(var a in e)t+=Number(e[a].value?e[a].value:"0");T(t)},R=function(){T(0),n(!1)};return i.a.createElement(Ne.a,{visible:a,placement:"left",closable:!1,width:"auto",height:"auto",style:{textAlign:"center"},onClose:R}," ",w?i.a.createElement(Re.a,null):D?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[D]?e.errorText[D]:e.cText.addWorkerError)):i.a.createElement("div",{style:{width:"90%",margin:"1rem auto"}},i.a.createElement("h4",{style:{color:"rgba(43, 144, 143, 0.85)",margin:20}},e.payText.title),i.a.createElement("h6",null,e.payText.infoHeader),i.a.createElement("p",{style:{padding:40}},e.payText.info),i.a.createElement(Te.a,{columns:M,dataSource:f,bordered:!0,size:"middle",width:"80%",pagination:{pageSize:20},footer:function(){var t=Number((O*e.payText.vatRate).toFixed(2)),a=t+O;return O?i.a.createElement("h6",{style:{textAlign:"right",padding:"0 20px"}},"".concat(e.payText.total," ").concat(O," ").concat(e.payText.currency,"\n                                 + ").concat(t," ").concat(e.payText.vat," = ").concat(a," ").concat(e.payText.currency)):null}}),i.a.createElement("p",{style:{padding:"20px 40px"}},e.payText.acceptPayment)),i.a.createElement("button",{onClick:function(){},disabled:!0,hidden:D,style:{marginRight:30},className:"btn btn-primary btn-sm"},e.payText?e.payText.payButton:""),i.a.createElement("button",{onClick:R,className:"btn btn-secondary btn-sm"},e.payText?e.payText.cancel:""))}),nt=a(500),rt=a.n(nt),lt=a(269),it=a.n(lt),ct=Object(c.b)(function(e){return{instrText:e.initLang.textOwner.phoneInstruction,lang:e.initLang.language}})(function(e){var t=Object(l.useState)(it.a.get("_gcn")),a=Object(r.a)(t,1)[0],c=Object(l.useContext)(u.a),o=c.showPhoneInstruction,s=c.setShowPhoneInstruction,m="https://driver.".concat(window.location.host,"/driver/");return i.a.createElement(n.a,{visible:o,title:e.instrText.title,width:"50vw",onCancel:function(){return s(!1)},footer:[i.a.createElement(f.a,{key:"back",onClick:function(){return s(!1)}},"OK")]},i.a.createElement("p",null,e.instrText.p1),i.a.createElement("p",null,e.instrText.p2+m+a+"/"+e.lang),i.a.createElement("p",null,e.instrText.p3),i.a.createElement("p",null,e.instrText.p4),i.a.createElement("p",null,e.instrText.p5),i.a.createElement("img",{style:{margin:"20px 100px"},src:rt.a,alt:"instructionPhone"}),i.a.createElement("p",null,e.instrText.p6),i.a.createElement("p",null,e.instrText.p7))}),ot=$.a.Option,ut=Object(c.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,manualText:e.initLang.textOwner.manualRoutes,_csrf:e.initLang._csrf,demo:e.authReducer.demo}})(function(e){var t=Object(l.useState)(0),a=Object(r.a)(t,2),n=a[0],c=a[1],o=Object(l.useContext)(Ge.a).setShowOwner,s={elementType:"input",label:e.manualText.kmStop,elementConfig:{type:"number"},value:"",validation:{required:!0,minLength:1,maxLength:7},valid:!1,touched:!1},m={elementType:"input",label:e.manualText.tonOut,elementConfig:{type:"number",min:0},value:"",validation:{required:!0,minLength:1,maxLength:2},valid:!1,touched:!1},d={elementType:"input",label:e.manualText.tonIn,elementConfig:{type:"number",min:0},value:"",validation:{required:!0,minLength:1,maxLength:2},valid:!1,touched:!1},h={elementType:"input",label:e.manualText.weight,elementConfig:{type:"number",min:0},value:"",validation:{required:!0,minLength:1,maxLength:2},valid:!1,touched:!1},p={elementType:"input",label:e.manualText.country,elementConfig:{type:"text"},value:"",validation:{required:!0,minLength:1,maxLength:20},valid:!1,touched:!1},b={elementType:"input",label:e.manualText.postal,elementConfig:{type:"text"},value:"",validation:{required:!0,minLength:3,maxLength:10},valid:!1,touched:!1},g={elementType:"input",label:e.manualText.litres,elementConfig:{type:"number",min:1},value:"",validation:{required:!0,minLength:1,maxLength:4},valid:!1,touched:!1},x={elementType:"select",label:e.manualText.full,elementConfig:{options:[{value:null,displayValue:""},{value:0,displayValue:e.manualText.no},{value:1,displayValue:e.manualText.yes}]},value:null,valid:!1,validation:{required:!0,minLength:1}},v={elementType:"select",label:e.manualText.fullFirst,elementConfig:{options:[{value:null,displayValue:""},{value:1,displayValue:e.manualText.yes}]},value:null,valid:!1,validation:{required:!0,minLength:1}},y=Object(l.useState)(null),O=Object(r.a)(y,2),T=O[0],j=O[1],k=Object(l.useContext)(u.a),w=k.showManualRoutes,C=k.setShowManualRoutes,S=Object(l.useContext)(ee.a).allActiveTrucks,L=Object(l.useState)(it.a.get("_gcn")),D=Object(r.a)(L,1)[0],N=Object(l.useState)(0),_=Object(r.a)(N,2),M=_[0],F=_[1],I=Object(l.useState)([]),R=Object(r.a)(I,2),A=R[0],P=R[1],q=Object(l.useState)(null),W=Object(r.a)(q,2),V=W[0],Y=W[1],z=Object(l.useState)([]),U=Object(r.a)(z,2),K=U[0],B=U[1],X=Object(l.useState)(null),J=Object(r.a)(X,2),Q=J[0],Z=J[1],G=Object(l.useState)(null),te=Object(r.a)(G,2),ae=te[0],ne=te[1],re=Object(l.useState)(null),le=Object(r.a)(re,2),ie=le[0],ce=le[1],oe=Object(l.useState)(!1),ue=Object(r.a)(oe,2),se=ue[0],me=ue[1],de=Object(l.useState)(null),he=Object(r.a)(de,2),fe=he[0],pe=he[1],be=Object(l.useState)(null),ge=Object(r.a)(be,2),xe=ge[0],ve=ge[1],ye=Object(l.useState)(!1),Ee=Object(r.a)(ye,2),Oe=Ee[0],Te=Ee[1],je=i.a.createElement(ot,null),ke=i.a.createElement(ot,null),we=i.a.createElement(ot,null),Ce=[],Se=[];if(T)for(var Le in T)Ce.push({id:Le,config:T[Le]}),Se.push(Le);Object(l.useEffect)(function(){w&&(me(!0),H.a.get("/system/allTrucks").then(function(e){P(e.data),H.a.get("/system/allDrivers").then(function(e){B(e.data),me(!1)}).catch(function(e){me(!1),ve(e)})}).catch(function(e){me(!1),ve(e)}))},[w]),Object(l.useEffect)(function(){T&&Object(Me.i)(T,Te)},[T]),Object(l.useEffect)(function(){Object(Me.c)(T,Se,e.manualText,j)},[e.manualText]);var De=function(){Object(Me.a)(T,Se,j),C(!1),pe(null),me(!0),j(null),c(0),Z(null),Y(null),ce(null),_e()},_e=function(){setTimeout(function(){me(!1)},10)};Object(l.useEffect)(function(){V&&Q&&ae&&(1===n&&j({kmStop:s,tonOut:m,postal:b,country:p}),2===n&&j({kmStop:s,tonIn:d,postal:b,country:p}),3===n&&M&&j({kmStop:s,litres:g,full:x,postal:b,country:p}),3!==n||M||j({kmStop:s,litres:g,fullFirst:v,weight:h,postal:b,country:p}))},[n]);var Fe=Ce.map(function(e){return i.a.createElement(Ie.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){Object(Me.f)(t,T,e.id,j)}})});A.length&&(je=A.map(function(e){return i.a.createElement(ot,{value:e._id,key:e._id},e._id)})),K.length&&(ke=K.map(function(e){return i.a.createElement(ot,{value:e._id,key:e._id},e.lastName+" "+e.name)}));var Ae=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.manualText.title),i.a.createElement($.a,{style:{width:"100%",margin:"15px 0"},onChange:function(e){Y(e),A.forEach(function(t){t._id===e&&F(t.routesLength)})},defaultValue:e.manualText.choiceTruck},je),i.a.createElement("br",null),i.a.createElement($.a,{style:{width:"100%",margin:"15px 0"},onChange:function(e){return Z(e)},defaultValue:e.manualText.choiceDriver},ke),i.a.createElement("br",null),i.a.createElement(E.a,{style:{width:"100%",marginTop:15},allowClear:!1,onChange:function(e){return ne(e._d.getTime())}}),i.a.createElement("br",null),i.a.createElement($.a,{disabled:null===V||null===Q||null===ae,style:{width:"100%",margin:"15px 0"},onChange:function(e){return c(e)},defaultValue:e.manualText.choiceAction},i.a.createElement(ot,{disabled:!M,value:1,key:1},e.manualText.load),i.a.createElement(ot,{disabled:!M,value:2,key:2},e.manualText.unLoad),i.a.createElement(ot,{value:3,key:3},e.manualText.fuel)),i.a.createElement("hr",null),i.a.createElement("form",{style:{display:"inline",textAlign:"center"}},Fe,i.a.createElement(f.a,{disabled:!Oe||se,onClick:function(){if(e.demo)e.demoModal(!0);else{var t=-1,a=0;3!==Number(n)||M||(t=Number(T.weight.value)),2===Number(n)&&(t=Number(T.tonIn.value)),1===Number(n)&&(t=Number(T.tonOut.value)),3!==Number(n)||M||(a=Number(T.fullFirst.value)),3===Number(n)&&M&&(a=Number(T.full.value));var r={add:1,country:T.country.value,driverId:Q,dtStop:ae,fuel_Id:3===Number(n)?-1:0,full:a,kmStop:Number(T.kmStop.value),litres:3===Number(n)?Number(T.litres.value):0,postal:T.postal.value,tonOut:t,truckId:V,type:Number(n),_csrf:e._csrf,_id:M};H.a.post("/system/owner/"+D,r).then(function(t){me(!1),pe(e.manualText.addRouteSuccess),o(!1),o(!0)}).catch(function(e){me(!1),ve(e.response.data.toString())}),console.log(r)}},style:{margin:"1rem"}},e.manualText?e.manualText.submitChange:"")));S.length&&(we=A.map(function(e){return e.routesLength?i.a.createElement(ot,{value:e._id,key:e._id+"X"},e._id):null}));var Pe=i.a.createElement(i.a.Fragment,null,i.a.createElement("h6",null,e.manualText.deleteTitle),i.a.createElement($.a,{style:{width:"100%",margin:"15px 0"},onChange:function(e){return ce(e)},defaultValue:e.manualText.choiceTruck},we),i.a.createElement(f.a,{type:"danger",disabled:se||!ie,style:{margin:"1rem"},onClick:function(){e.demo?e.demoModal(!0):H.a.delete("/system/owner/delRoute",{data:{_id:ie}}).then(function(t){pe(e.manualText.deleteRouteSuccess),o(!1),o(!0)}).catch(function(e){return ve(e.response.data)})}},e.manualText?e.manualText.deleteRoute:""),i.a.createElement(f.a,{onClick:De},e.manualText?e.manualText.cancel:""));return i.a.createElement(Ne.a,{visible:w,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:De},A.length?fe?i.a.createElement("div",{style:{margin:20,textAlign:"center"}},i.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},fe)):xe?i.a.createElement("div",{style:{margin:"1.5rem"}},i.a.createElement("h6",{style:{color:"red"}},e.errorText[xe]?e.errorText[xe]:e.manualText.addRouteError)):se?i.a.createElement(Re.a,null):Ae:i.a.createElement("h6",{style:{margin:20,color:"rgba(43, 144, 143, 0.85)"}},e.manualText.noTrucks),i.a.createElement(f.a,{onClick:De},e.manualText?e.manualText.cancel:""),i.a.createElement("hr",null),xe||fe?null:Pe)}),st=a(501),mt=a.n(st),dt=i.a.lazy(function(){return a.e(9).then(a.bind(null,503))});t.default=Object(c.b)(function(e){return{token:e.authReducer.token,demoText:e.initLang.textOwner.userMenu.demo}},function(e){return{onLogout:function(){return e(o.logoutUser())}}})(function(e){var t=Object(l.useContext)(Ge.a).setShowOwner;Object(l.useEffect)(function(){e.token||(t(!1),e.onLogout())},[e.token]);var a=Object(l.useState)(!1),c=Object(r.a)(a,2),o=c[0],m=c[1],d=Object(l.useState)(!1),h=Object(r.a)(d,2),f=h[0],p=h[1],b=Object(l.useState)(!1),g=Object(r.a)(b,2),v=g[0],y=g[1],E=Object(l.useState)(!1),O=Object(r.a)(E,2),T=O[0],j=O[1],k=Object(l.useState)(!1),w=Object(r.a)(k,2),C=w[0],S=w[1],L=Object(l.useState)(!1),D=Object(r.a)(L,2),N=D[0],_=D[1],M=Object(l.useState)(!1),F=Object(r.a)(M,2),I=F[0],R=F[1],A=Object(l.useState)(!1),P=Object(r.a)(A,2),q=P[0],W=P[1],V=Object(l.useState)(!1),H=Object(r.a)(V,2),Y=H[0],z=H[1],U=Object(l.useState)(!1),K=Object(r.a)(U,2),B=K[0],X=K[1],J=Object(l.useState)(!1),Q=Object(r.a)(J,2),Z=Q[0],G=Q[1],$=Object(l.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ae=ee[1];return i.a.createElement(u.a.Provider,{value:{showAddDriver:o,setShowAddDriver:function(e){return m(e)},showEditDriver:f,setShowEditDriver:function(e){return p(e)},showAddTruck:v,setShowAddTruck:function(e){return y(e)},showEditTruck:T,setShowEditTruck:function(e){return j(e)},showTheft:C,setShowTheft:function(e){return S(e)},showAddWorker:N,setShowAddWorker:function(e){return _(e)},showEditWorker:I,setShowEditWorker:function(e){return R(e)},showEditCompany:q,setShowEditCompany:function(e){return W(e)},showPayments:Y,setShowPayments:function(e){return z(e)},showPhoneInstruction:B,setShowPhoneInstruction:function(e){return X(e)},showManualRoutes:Z,setShowManualRoutes:function(e){return G(e)}}},i.a.createElement("div",null,i.a.createElement(s.a,null),i.a.createElement("div",{className:mt.a.Container},i.a.createElement(x,null),i.a.createElement(De,null))),i.a.createElement(n.a,{visible:te,closable:!1,zIndex:2e3,cancelButtonProps:{disabled:!0},onOk:function(){return ae(!1)}},e.demoText),i.a.createElement(Ae,{demoModal:ae}),i.a.createElement(dt,{demoModal:ae}),i.a.createElement(qe,{demoModal:ae}),i.a.createElement(ze,{demoModal:ae}),i.a.createElement(Ke,{demoModal:ae}),i.a.createElement(Xe,{demoModal:ae}),i.a.createElement(Ze,{demoModal:ae}),i.a.createElement(et,{demoModal:ae}),i.a.createElement(at,null),i.a.createElement(ct,null),i.a.createElement(ut,{demoModal:ae}))})}}]);
//# sourceMappingURL=7.9ee27c76.chunk.js.map