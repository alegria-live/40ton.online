(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{503:function(e,t,n){"use strict";n.r(t);n(131);var a=n(133),r=(n(118),n(120)),i=(n(134),n(140)),l=(n(139),n(132)),c=n(20),o=n(0),u=n.n(o),d=n(25),m=n(119),s=n(268),v=n(9),f=n(126),g=n(37),h=n(14),b=n.n(h),x=n(23),p=n.n(x),E=l.a.Option,T=i.a.confirm;t.default=Object(d.b)(function(e){return{errorText:e.initLang.textHome.serverResErrors,driversText:e.initLang.textOwner.driversForm,textMenu:e.initLang.textOwner.userMenu,demo:e.authReducer.demo}})(function(e){var t=Object(o.useState)({name:{elementType:"input",elementConfig:{type:"text",placeholder:e.driversText.name},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},lastName:{elementType:"input",elementConfig:{type:"text",placeholder:e.driversText.lastName},value:"",validation:{required:!0,minLength:2,maxLength:20},valid:!1,touched:!1},_id:{elementType:"input",elementConfig:{type:"text",disabled:!0},value:"",validation:{required:!0,minLength:6,maxLength:20},valid:!1,touched:!1}}),n=Object(c.a)(t,2),i=n[0],d=n[1],h=Object(o.useContext)(m.a),x=h.showEditDriver,O=h.setShowEditDriver,y=Object(o.useState)([]),j=Object(c.a)(y,2),w=j[0],C=j[1],D=Object(o.useState)(!1),L=Object(c.a)(D,2),k=L[0],N=L[1],S=Object(o.useState)(null),_=Object(c.a)(S,2),M=_[0],q=_[1],A=Object(o.useState)(null),F=Object(c.a)(A,2),J=F[0],R=F[1],V=Object(o.useState)(!1),H=Object(c.a)(V,2),I=H[0],P=H[1],z=u.a.createElement(E,null),B=[],G=[];for(var K in i)B.push({id:K,config:i[K]}),G.push(K);var Q=function(){N(!0),b.a.get("/system/allDrivers").then(function(e){C(e.data),N(!1)}).catch(function(e){N(!1),R(e)})};Object(o.useEffect)(function(){x&&Q()},[x]),Object(o.useEffect)(function(){Object(v.i)(i,P)},[i]),Object(o.useEffect)(function(){Object(v.b)(i,G,e.driversText,d)},[e.driversText]);var U=function(){Object(v.a)(i,G,d),O(!1),q(null),R(null),N(!0),W()},W=function(){setTimeout(function(){N(!1)},10)},X=B.map(function(e){return u.a.createElement(f.a,{key:e.id,label:e.config.label,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,invalid:!e.config.valid,shouldValidate:e.config.validation,touched:e.config.touched,changed:function(t){return Object(v.f)(t,i,e.id,d)}})});w.length&&(z=w.map(function(e){return u.a.createElement(E,{value:e._id,key:e._id},e.lastName+" "+e.name)}));var Y=u.a.createElement(u.a.Fragment,null,u.a.createElement("h6",null,e.driversText.editPanelName),u.a.createElement("p",null,e.driversText.choiceDriver),u.a.createElement(l.a,{style:{width:280},onChange:function(e){return function(e){var t=w.find(function(t){return t._id===e}),n=p.a.cloneDeep(i);G.forEach(function(e){n[e].value=t[e],n[e].valid=!0,n[e].touched=!0}),d(n)}(e)},defaultValue:e.textMenu.drivers},z),u.a.createElement("form",{style:{display:"inline",textAlign:"center"}},X,u.a.createElement(r.a,{disabled:!I||k,onClick:function(){e.demo?e.demoModal(!0):new s.a({id:i._id.value.toLowerCase().trim(),newData:{"Driver.name":i.name.value.trim(),"Driver.lastName":i.lastName.value.trim()}}).updateDriver(q,R,N,Q)}},e.driversText?e.driversText.submitChange:null),u.a.createElement(r.a,{disabled:!I||k,type:"danger",style:{margin:"1rem"},onClick:function(){if(e.demo)e.demoModal(!0);else{var t=new s.a({id:i._id.value.toLowerCase().trim()});T({title:i.name.value+" "+i.lastName.value,content:e.driversText.deleteConfirm,onOk:function(){t.deleteDriver(q,R,N,Q)},onCancel:function(){}})}}},e.driversText?e.driversText.delete:null)));return u.a.createElement(a.a,{visible:x,placement:"left",closable:!1,width:"auto",style:{textAlign:"center"},onClose:U},w.length?M?u.a.createElement("div",{style:{margin:20,textAlign:"center"}},u.a.createElement("h5",{style:{color:"rgba(43, 144, 143, 0.85)"}},e.driversText.editDriverSuccess),u.a.createElement("h6",null,i.name.value+" "+i.lastName.value),u.a.createElement("p",null,"Id: ",M)):J?u.a.createElement("div",{style:{margin:"1.5rem"}},u.a.createElement("h6",{style:{color:"red"}},e.errorText[J]?e.errorText[J]:e.driversText.addDriverError)):k?u.a.createElement(g.a,null):Y:u.a.createElement("h6",{style:{margin:20,color:"rgba(43, 144, 143, 0.85)"}},e.driversText.noDrivers),u.a.createElement(r.a,{onClick:U},e.driversText?e.driversText.cancel:null))})}}]);
//# sourceMappingURL=9.0af53fb2.chunk.js.map